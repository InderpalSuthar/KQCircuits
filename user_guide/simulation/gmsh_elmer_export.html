<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gmsh/Elmer export &mdash; KQCircuits  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/logo.svg"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Run and export in one line" href="export_and_run.html" />
    <link rel="prev" title="Simulation features" href="simulation_features.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/logo-small.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../installation.html#klayout">KLayout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../installation.html#known-installation-issues">Known installation issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../installation.html#installing-different-python-package-versions-to-klayout-manually">Installing different Python package versions to KLayout manually</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../salt.html">Getting started (Salt package)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../salt.html#installing-kqcircuits-salt-package">Installing KQCircuits Salt Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../salt.html#first-look-around">First look around</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../salt.html#setting-up-a-user-package-directory">Setting up a user package directory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../salt.html#defining-a-custom-element">Defining a custom element</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../salt.html#defining-a-custom-chip">Defining a custom chip</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../salt.html#upgrading-or-removing-salt-package">Upgrading or Removing Salt Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../salt.html#release-notes">Release Notes</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../usage.html">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gui_features.html">GUI Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gui_features.html#useful-hotkeys">Useful hotkeys</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gui_features.html#introduction-to-elements">Introduction to Elements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gui_features.html#placing-elements">Placing Elements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gui_features.html#modifying-element-parameters">Modifying Element parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gui_features.html#modifying-waveguides">Modifying waveguides</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gui_features.html#editing-waveguidecomposite-nodes">Editing WaveguideComposite Nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gui_features.html#converting-elements-placed-in-gui-into-code">Converting elements placed in GUI into code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gui_features.html#useful-menu-commands">Useful Menu Commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../gui_workflow.html">Point-and-click workflow tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python_workflow.html">Python workflow tutorial</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../python_workflow.html#file-system-hierarchy">File system hierarchy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../python_workflow.html#structure-of-element-code">Structure of Element code</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../python_workflow.html#element-class"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code> class</a></li>
<li class="toctree-l4"><a class="reference internal" href="../python_workflow.html#libraries">Libraries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../python_workflow.html#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../python_workflow.html#build">Build</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../python_workflow.html#example-of-defining-an-element-class">Example of defining an <code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code> class</a></li>
<li class="toctree-l3"><a class="reference internal" href="../python_workflow.html#example-of-defining-a-chip-and-inserting-elements-into-it">Example of defining a Chip and inserting elements into it</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../python_workflow.html#defining-sampleholder-types">Defining sampleholder types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../python_workflow.html#refpoints">Refpoints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../python_workflow.html#kqcircuits-layers">KQCircuits’ Layers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../python_workflow.html#faces">Faces</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../python_workflow.html#layer-configuration-files">Layer configuration files</a></li>
<li class="toctree-l4"><a class="reference internal" href="../python_workflow.html#adding-a-new-face">Adding a new face</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../python_workflow.html#opening-element-or-chip-from-an-ide">Opening <code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">Chip</span></code> from an IDE</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../macro_workflow.html">Macro development</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../macro_workflow.html#running-the-first-example">Running the first example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../macro_workflow.html#interacting-with-the-klayout-application">Interacting with the KLayout application</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../macro_workflow.html#creating-a-new-panel">Creating a new panel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../macro_workflow.html#accessing-the-currently-active-panel">Accessing the currently active panel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../macro_workflow.html#using-klayoutview">Using <code class="docutils literal notranslate"><span class="pre">KLayoutView</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../macro_workflow.html#debugger">Debugger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../macro_workflow.html#reloading-libraries">Reloading libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../macro_workflow.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mask_export.html">Mask export</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../mask_export.html#tutorial">Tutorial</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../mask_export.html#basic-mask-script-and-export">Basic mask script and export</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mask_export.html#ground-grid">Ground grid</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mask_export.html#adding-and-modifying-chips">Adding and modifying chips</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mask_export.html#multi-face-masks">Multi-face masks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mask_export.html#composite-mask-maps">Composite mask maps</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../simulations.html">External simulation tools</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="simulation_objects.html">Simulation objects</a><ul>
<li class="toctree-l4"><a class="reference internal" href="simulation_objects.html#the-simulation-class">The Simulation class</a></li>
<li class="toctree-l4"><a class="reference internal" href="simulation_objects.html#simulation-subclass">Simulation subclass</a></li>
<li class="toctree-l4"><a class="reference internal" href="simulation_objects.html#geometry-sweeps">Geometry sweeps</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="simulation_scripts.html">Export functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="simulation_scripts.html#ansys-export">Ansys export</a></li>
<li class="toctree-l4"><a class="reference internal" href="simulation_scripts.html#elmer-export">Elmer export</a></li>
<li class="toctree-l4"><a class="reference internal" href="simulation_scripts.html#geometry-from-klayout-gui">Geometry from Klayout GUI</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="simulation_features.html">Simulation features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="simulation_features.html#s-parameter-matrix">S-parameter matrix</a></li>
<li class="toctree-l4"><a class="reference internal" href="simulation_features.html#capacitance-matrix">Capacitance matrix</a></li>
<li class="toctree-l4"><a class="reference internal" href="simulation_features.html#eigenmode">Eigenmode</a></li>
<li class="toctree-l4"><a class="reference internal" href="simulation_features.html#energy-integrals-and-participation-ratio">Energy integrals and participation ratio</a></li>
<li class="toctree-l4"><a class="reference internal" href="simulation_features.html#cross-sectional-simulations">Cross-sectional simulations</a></li>
<li class="toctree-l4"><a class="reference internal" href="simulation_features.html#pyepr">pyEPR</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Gmsh/Elmer export</a></li>
<li class="toctree-l3"><a class="reference internal" href="export_and_run.html">Run and export in one line</a></li>
<li class="toctree-l3"><a class="reference internal" href="elmer_remote_workflow.html">Elmer remote simulations workflow</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../file_system_and_utilities.html">General Structure and Miscellaneous Utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../file_system_and_utilities.html#file-system-hierarchy">File system hierarchy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../file_system_and_utilities.html#miscellaneous-utilities">Miscellaneous Utilities</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../xsection.html">Creating cross section images</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../xsection.html#klayout-gui-xsection-tool">KLayout GUI XSection tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../xsection.html#xsection-call-in-kqc-code">XSection call in KQC code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../xsection.html#process-files-xs">Process files (.xs)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../terminology.html">Terminology</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Developer Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../developer/setup.html">Developer Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer/setup.html#prerequisites">Prerequisites</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer/setup.html#python">Python</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/setup.html#sources">Sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/setup.html#install">Install</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/setup.html#unlinking">Unlinking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/setup.html#update">Update</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/setup.html#secondary-install">Secondary install</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/setup.html#manual-installation">Manual installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer/setup.html#linux-or-macos">Linux or MacOS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/setup.html#windows">Windows</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/standalone.html">KLayout Standalone Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer/standalone.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/standalone.html#installation">Installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer/standalone.html#standard-not-secure-installation">Standard, Not Secure Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/standalone.html#reproducible-secure-installation">Reproducible, Secure Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/standalone.html#pypi-installation">PyPI Installation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/standalone.html#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/standalone.html#jupyter-notebook-usage">Jupyter notebook usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/standalone.html#updating-the-required-dependencies">Updating the required dependencies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/containers.html">Containers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer/containers.html#cli-usage">CLI usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/containers.html#docker-ci-usage">Docker CI usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/containers.html#singularity-usage">Singularity usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/architecture.html">Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer/architecture.html#elements">Elements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/architecture.html#pcell-parameters">PCell parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/architecture.html#libraries">Libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/architecture.html#pya-resolver">pya resolver</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/testing.html">Testing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer/testing.html#unit-tests">Unit tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/coding_style.html">Coding Style</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/documentation.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing.html">Contributing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../contributing.html#versioning">Versioning</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../api/kqcircuits.html">API documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.chips.html">kqcircuits.chips</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.airbridge_crossings.html">kqcircuits.chips.airbridge_crossings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.airbridge_dc_test.html">kqcircuits.chips.airbridge_dc_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.chip.html">kqcircuits.chips.chip</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.crossing_twoface.html">kqcircuits.chips.crossing_twoface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.daisy_woven.html">kqcircuits.chips.daisy_woven</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.dc_test.html">kqcircuits.chips.dc_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.demo.html">kqcircuits.chips.demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.demo_twoface.html">kqcircuits.chips.demo_twoface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.empty.html">kqcircuits.chips.empty</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.junction_test.html">kqcircuits.chips.junction_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.junction_test2.html">kqcircuits.chips.junction_test2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.launchers.html">kqcircuits.chips.launchers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.lithography_test.html">kqcircuits.chips.lithography_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.lithography_test_twoface.html">kqcircuits.chips.lithography_test_twoface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.quality_factor.html">kqcircuits.chips.quality_factor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.quality_factor_twoface.html">kqcircuits.chips.quality_factor_twoface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.sample_holder_test.html">kqcircuits.chips.sample_holder_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.shaping.html">kqcircuits.chips.shaping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.simple.html">kqcircuits.chips.simple</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.single_xmons.html">kqcircuits.chips.single_xmons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.stripes.html">kqcircuits.chips.stripes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.tsv_test.html">kqcircuits.chips.tsv_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.xmons_direct_coupling.html">kqcircuits.chips.xmons_direct_coupling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.html#module-kqcircuits.chips">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.elements.html">kqcircuits.elements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.airbridges.html">kqcircuits.elements.airbridges</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.airbridges.airbridge.html">kqcircuits.elements.airbridges.airbridge</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.airbridges.airbridge_multi_face.html">kqcircuits.elements.airbridges.airbridge_multi_face</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.airbridges.airbridge_rectangular.html">kqcircuits.elements.airbridges.airbridge_rectangular</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.airbridges.html#module-kqcircuits.elements.airbridges">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.flip_chip_connectors.html">kqcircuits.elements.flip_chip_connectors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.flip_chip_connectors.flip_chip_connector.html">kqcircuits.elements.flip_chip_connectors.flip_chip_connector</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.flip_chip_connectors.flip_chip_connector_dc.html">kqcircuits.elements.flip_chip_connectors.flip_chip_connector_dc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.flip_chip_connectors.flip_chip_connector_rf.html">kqcircuits.elements.flip_chip_connectors.flip_chip_connector_rf</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.flip_chip_connectors.html#module-kqcircuits.elements.flip_chip_connectors">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.fluxlines.html">kqcircuits.elements.fluxlines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.fluxlines.fluxline.html">kqcircuits.elements.fluxlines.fluxline</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.fluxlines.fluxline_standard.html">kqcircuits.elements.fluxlines.fluxline_standard</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.fluxlines.fluxline_straight.html">kqcircuits.elements.fluxlines.fluxline_straight</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.fluxlines.html#module-kqcircuits.elements.fluxlines">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.markers.html">kqcircuits.elements.markers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.markers.marker.html">kqcircuits.elements.markers.marker</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.markers.marker_standard.html">kqcircuits.elements.markers.marker_standard</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.markers.mask_marker_fc.html">kqcircuits.elements.markers.mask_marker_fc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.markers.html#module-kqcircuits.elements.markers">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.tsvs.html">kqcircuits.elements.tsvs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.tsvs.tsv.html">kqcircuits.elements.tsvs.tsv</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.tsvs.tsv_ellipse.html">kqcircuits.elements.tsvs.tsv_ellipse</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.tsvs.tsv_standard.html">kqcircuits.elements.tsvs.tsv_standard</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.tsvs.html#module-kqcircuits.elements.tsvs">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.airbridge_connection.html">kqcircuits.elements.airbridge_connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.capacitive_x_coupler.html">kqcircuits.elements.capacitive_x_coupler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.chip_frame.html">kqcircuits.elements.chip_frame</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.circular_capacitor.html">kqcircuits.elements.circular_capacitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.element.html">kqcircuits.elements.element</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.finger_capacitor_square.html">kqcircuits.elements.finger_capacitor_square</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.finger_capacitor_taper.html">kqcircuits.elements.finger_capacitor_taper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.hanger_resonator.html">kqcircuits.elements.hanger_resonator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.launcher.html">kqcircuits.elements.launcher</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.launcher_dc.html">kqcircuits.elements.launcher_dc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.meander.html">kqcircuits.elements.meander</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.smooth_capacitor.html">kqcircuits.elements.smooth_capacitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.spiral_resonator_polygon.html">kqcircuits.elements.spiral_resonator_polygon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.waveguide_composite.html">kqcircuits.elements.waveguide_composite</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.waveguide_coplanar.html">kqcircuits.elements.waveguide_coplanar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.waveguide_coplanar_curved.html">kqcircuits.elements.waveguide_coplanar_curved</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.waveguide_coplanar_splitter.html">kqcircuits.elements.waveguide_coplanar_splitter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.waveguide_coplanar_straight.html">kqcircuits.elements.waveguide_coplanar_straight</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.waveguide_coplanar_taper.html">kqcircuits.elements.waveguide_coplanar_taper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.html#module-kqcircuits.elements">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.junctions.html">kqcircuits.junctions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.junctions.junction.html">kqcircuits.junctions.junction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.junctions.manhattan.html">kqcircuits.junctions.manhattan</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.junctions.manhattan_single_junction.html">kqcircuits.junctions.manhattan_single_junction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.junctions.no_squid.html">kqcircuits.junctions.no_squid</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.junctions.sim.html">kqcircuits.junctions.sim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.junctions.squid.html">kqcircuits.junctions.squid</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.junctions.html#module-kqcircuits.junctions">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.layer_config.html">kqcircuits.layer_config</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.layer_config.default_layer_config.html">kqcircuits.layer_config.default_layer_config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.layer_config.example_layer_config.html">kqcircuits.layer_config.example_layer_config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.layer_config.html#module-kqcircuits.layer_config">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.masks.html">kqcircuits.masks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.masks.mask_export.html">kqcircuits.masks.mask_export</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.masks.mask_layout.html">kqcircuits.masks.mask_layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.masks.mask_set.html">kqcircuits.masks.mask_set</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.masks.multi_face_mask_layout.html">kqcircuits.masks.multi_face_mask_layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.masks.html#module-kqcircuits.masks">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.qubits.html">kqcircuits.qubits</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.qubits.concentric_transmon.html">kqcircuits.qubits.concentric_transmon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.qubits.double_pads.html">kqcircuits.qubits.double_pads</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.qubits.double_pads_splines.html">kqcircuits.qubits.double_pads_splines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.qubits.qubit.html">kqcircuits.qubits.qubit</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.qubits.swissmon.html">kqcircuits.qubits.swissmon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.qubits.html#module-kqcircuits.qubits">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.simulations.html">kqcircuits.simulations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.export.html">kqcircuits.simulations.export</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.simulations.export.ansys.html">kqcircuits.simulations.export.ansys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.simulations.export.elmer.html">kqcircuits.simulations.export.elmer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.simulations.export.sonnet.html">kqcircuits.simulations.export.sonnet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.simulations.export.xsection.html">kqcircuits.simulations.export.xsection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.simulations.export.export_and_run.html">kqcircuits.simulations.export.export_and_run</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.simulations.export.export_singularity.html">kqcircuits.simulations.export.export_singularity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.simulations.export.remote_export_and_run.html">kqcircuits.simulations.export.remote_export_and_run</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.simulations.export.simulation_export.html">kqcircuits.simulations.export.simulation_export</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.simulations.export.util.html">kqcircuits.simulations.export.util</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.simulations.export.html#module-kqcircuits.simulations.export">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.airbridges_sim.html">kqcircuits.simulations.airbridges_sim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.cross_section_simulation.html">kqcircuits.simulations.cross_section_simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.empty_simulation.html">kqcircuits.simulations.empty_simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.partition_region.html">kqcircuits.simulations.partition_region</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.port.html">kqcircuits.simulations.port</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.post_process.html">kqcircuits.simulations.post_process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.simulation.html">kqcircuits.simulations.simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.single_element_simulation.html">kqcircuits.simulations.single_element_simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.single_xmons_full_chip_sim.html">kqcircuits.simulations.single_xmons_full_chip_sim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.waveguides_sim.html">kqcircuits.simulations.waveguides_sim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.xmons_direct_coupling_full_chip_sim.html">kqcircuits.simulations.xmons_direct_coupling_full_chip_sim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.xmons_direct_coupling_sim.html">kqcircuits.simulations.xmons_direct_coupling_sim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.html#module-kqcircuits.simulations">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.test_structures.html">kqcircuits.test_structures</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.test_structures.junction_test_pads.html">kqcircuits.test_structures.junction_test_pads</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.test_structures.junction_test_pads.junction_test_pads.html">kqcircuits.test_structures.junction_test_pads.junction_test_pads</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.test_structures.junction_test_pads.junction_test_pads_simple.html">kqcircuits.test_structures.junction_test_pads.junction_test_pads_simple</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.test_structures.junction_test_pads.html#module-kqcircuits.test_structures.junction_test_pads">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.test_structures.airbridge_dc.html">kqcircuits.test_structures.airbridge_dc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.test_structures.cross_test.html">kqcircuits.test_structures.cross_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.test_structures.stripes_test.html">kqcircuits.test_structures.stripes_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.test_structures.stripes_test_increasing_width.html">kqcircuits.test_structures.stripes_test_increasing_width</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.test_structures.test_structure.html">kqcircuits.test_structures.test_structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.test_structures.tsv_test_pattern.html">kqcircuits.test_structures.tsv_test_pattern</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.test_structures.html#module-kqcircuits.test_structures">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.util.html">kqcircuits.util</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.area.html">kqcircuits.util.area</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.count_instances.html">kqcircuits.util.count_instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.coupler_lib.html">kqcircuits.util.coupler_lib</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.deep_delete.html">kqcircuits.util.deep_delete</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.defaults_helper.html">kqcircuits.util.defaults_helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.dependencies.html">kqcircuits.util.dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.edit_node_plugin.html">kqcircuits.util.edit_node_plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.export_helper.html">kqcircuits.util.export_helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.geometry_helper.html">kqcircuits.util.geometry_helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.geometry_json_encoder.html">kqcircuits.util.geometry_json_encoder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.groundgrid.html">kqcircuits.util.groundgrid</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.gui_helper.html">kqcircuits.util.gui_helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.import_helper.html">kqcircuits.util.import_helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.label.html">kqcircuits.util.label</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.layout_to_code.html">kqcircuits.util.layout_to_code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.library_helper.html">kqcircuits.util.library_helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.log_router.html">kqcircuits.util.log_router</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.merge.html">kqcircuits.util.merge</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.netlist_extraction.html">kqcircuits.util.netlist_extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.netlist_graph.html">kqcircuits.util.netlist_graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.parameters.html">kqcircuits.util.parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.plugin_startup.html">kqcircuits.util.plugin_startup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.refpoints.html">kqcircuits.util.refpoints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.replace_junctions.html">kqcircuits.util.replace_junctions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.symmetric_polygons.html">kqcircuits.util.symmetric_polygons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.html#module-kqcircuits.util">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.defaults.html">kqcircuits.defaults</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.klayout_view.html">kqcircuits.klayout_view</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.layer_cluster.html">kqcircuits.layer_cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.pya_resolver.html">kqcircuits.pya_resolver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.run.html">kqcircuits.run</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.html#module-kqcircuits">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../citing.html">Citing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trademarks.html">Trademarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">KQCircuits</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">User Guide</a></li>
          <li class="breadcrumb-item"><a href="../simulations.html">External simulation tools</a></li>
      <li class="breadcrumb-item active">Gmsh/Elmer export</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/iqm-finland/KQCircuits/blob/main/docs/user_guide/simulation/gmsh_elmer_export.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="gmsh-elmer-export">
<span id="id1"></span><h1>Gmsh/Elmer export<a class="headerlink" href="#gmsh-elmer-export" title="Permalink to this headline"></a></h1>
<p>Usage of Gmsh and Elmer export is similar to Ansys export.
The <code class="docutils literal notranslate"><span class="pre">simulation</span></code> object can be used with function <code class="docutils literal notranslate"><span class="pre">export_elmer</span></code> to export all necessary files to produce Gmsh/Elmer
simulations.</p>
<p>There is an example at <a class="reference external" href="https://github.com/iqm-finland/KQCircuits/blob/main//klayout_package/python/scripts/simulations/waveguides_sim_compare.py">klayout_package/python/scripts/simulations/waveguides_sim_compare.py</a>, which creates a simulation folder
with simulation scripts. The folder is created to <cite>$TMP</cite> (usually <cite>kqcircuits/tmp</cite>). The contents of the folder is something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>waveguides_sim_elmer
├── COMMIT_REFERENCE
├── scripts
│   ├── elmer_helpers.py
│   ├── gmsh_helpers.py
│   └── run.py
├── sif
│   ├── CapacitanceMatrix.sif
│   └── electric_potential.pvsm
├── simulation.oas
├── simulation.sh
├── waveguides_n_guides_1.gds
├── waveguides_n_guides_1.json
├── waveguides_n_guides_1.sh
├── waveguides_n_guides_2.gds
├── waveguides_n_guides_2.json
└── waveguides_n_guides_2.sh
</pre></div>
</div>
<p><cite>script</cite> folder contains scripts that are used for preparing the simulations.</p>
<p><cite>sif</cite> contains the Solver Input Files (SIF) for Elmer (scripts in <cite>scripts</cite> -folder are used
to build the SIF files for each simulation).</p>
<p><cite>waveguides_n_guides_1.sh</cite>, <cite>waveguides_n_guides_2.sh</cite>, <cite>…</cite> are the shell scripts for running each simulation.
Each script executes Gmsh (mesh creation), computes the FEM model using Elmer (computes the
capacitance matrix), and visualizes the results using Paraview.</p>
<p><cite>simulation.sh</cite> is a shell script for running all simulations at once.
The simulations are executed by running the <cite>.sh</cite> file in the output folder (here <cite>waveguides_sim_elmer</cite>).</p>
<dl class="simple">
<dt>Parallelization of the FEM computations has three levels:</dt><dd><ol class="arabic simple">
<li><p>independent processes, that are completely self consistent simulation processes that
do not need to communicate to other processes. This level of parallelism can be used with parameter sweeps
where multiple Elmer simulations are needed. If the varied parameter does not affect meshing i.e. frequency
or material parameters, the meshes will be only generated once for all simulations in the sweep.
Number of parallel processes on this level can be controlled by setting <code class="docutils literal notranslate"><span class="pre">n_workers</span></code> in <code class="docutils literal notranslate"><span class="pre">workflow</span></code>.</p></li>
<li><p>dependent processes that are computing the same simulation and need to communicate
with the others doing the same thing. This level of parallelism is handled by MPI.
Number of dependent processes per independent process or simulation can be controlled
by setting <code class="docutils literal notranslate"><span class="pre">elmer_n_processes</span></code> in <code class="docutils literal notranslate"><span class="pre">workflow</span></code>.</p></li>
<li><p>thread-level parallelism where multiple threads or cores are used per each dependent process.
This is implemented using OpenMP. The number of threads per process can be controlled by
setting <code class="docutils literal notranslate"><span class="pre">elmer_n_threads</span></code> in <code class="docutils literal notranslate"><span class="pre">workflow</span></code>. It is usually also most efficient to prefer MPI processes than threads.
However, when the mesh is small, it may be beneficial to increase the use of threads.</p></li>
</ol>
</dd>
</dl>
<p>Image below is a representation of these levels and their relationship:</p>
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   width="800"
   height="457.33334"
   overflow="hidden"
   version="1.1"
   id="svg99"
   sodipodi:docname="fem_parallelization_schemes.svg"
   inkscape:version="1.3 (0e150ed6c4, 2023-07-21)"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview101"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:pageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     showgrid="false"
     inkscape:zoom="1.653125"
     inkscape:cx="504.1966"
     inkscape:cy="244.08318"
     inkscape:window-width="2560"
     inkscape:window-height="1369"
     inkscape:window-x="1072"
     inkscape:window-y="-8"
     inkscape:window-maximized="1"
     inkscape:current-layer="svg99"
     width="1279px"
     fit-margin-top="0"
     fit-margin-left="0"
     fit-margin-right="0"
     fit-margin-bottom="0"
     inkscape:showpageshadow="2"
     inkscape:deskcolor="#d1d1d1" />
  <defs
     id="defs5">
    <rect
       x="610.96408"
       y="38.109641"
       width="165.14178"
       height="55.047259"
       id="rect5" />
    <rect
       x="638.18526"
       y="22.986767"
       width="142.15501"
       height="46.57845"
       id="rect4" />
    <rect
       x="625.48204"
       y="20.567108"
       width="146.99433"
       height="60.491493"
       id="rect3" />
    <clipPath
       id="clip0">
      <rect
         x="0"
         y="0"
         width="1280"
         height="720"
         id="rect2" />
    </clipPath>
  </defs>
  <rect
     x="368.6875"
     y="0.63834399"
     width="219.09445"
     height="456.05667"
     stroke="#055c65"
     stroke-width="1.27668"
     stroke-miterlimit="8"
     fill="#097f8c"
     id="rect9" />
  <rect
     x="618.01465"
     y="-3.4673679"
     width="184.70476"
     height="467.03558"
     stroke="#055c65"
     stroke-width="1.18622"
     stroke-miterlimit="8"
     fill="#097f8c"
     id="rect9-1" />
  <rect
     x="203.66667"
     y="0.66667002"
     width="131"
     height="456"
     stroke="#055c65"
     stroke-width="1.33333"
     stroke-miterlimit="8"
     fill="#097f8c"
     id="rect11" />
  <rect
     x="0.66667002"
     y="76.666672"
     width="162"
     height="82"
     stroke="#002668"
     stroke-width="1.33333"
     stroke-miterlimit="8"
     fill="#ffffff"
     id="rect13" />
  <text
     font-family="'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif"
     font-weight="400"
     font-size="24px"
     id="text15"
     x="55.26268"
     y="126.16667">KQC</text>
  <rect
     x="0.66667002"
     y="202.66667"
     width="162"
     height="81"
     stroke="#002668"
     stroke-width="1.33333"
     stroke-miterlimit="8"
     fill="#ffffff"
     id="rect17" />
  <text
     font-family="'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif"
     font-weight="400"
     font-size="13px"
     id="text19"
     x="25.262678"
     y="248.16667">Workload manager</text>
  <path
     d="m 82.16667,158.16667 v 38.072 h -2 v -38.072 z m 3,36.739 -4,8 -4,-8 z"
     id="path21" />
  <text
     font-family="'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif"
     font-weight="400"
     font-size="13px"
     id="text25"
     x="12.372663"
     y="176.16667">simulation <tspan
   font-size="13px"
   x="12.372663"
   y="192.16667"
   id="tspan23">script</tspan></text>
  <rect
     x="232.66667"
     y="156.66667"
     width="70"
     height="28"
     stroke="#002668"
     stroke-width="1.33333"
     stroke-miterlimit="8"
     fill="#ffffff"
     id="rect27" />
  <text
     font-family="'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif"
     font-weight="400"
     font-size="13px"
     id="text29"
     x="244.45268"
     y="175.16667">Elmer 1</text>
  <rect
     x="232.66667"
     y="318.66666"
     width="70"
     height="28"
     stroke="#002668"
     stroke-width="1.33333"
     stroke-miterlimit="8"
     fill="#ffffff"
     id="rect31" />
  <text
     font-family="'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif"
     font-weight="400"
     font-size="13px"
     id="text33"
     x="244.45268"
     y="337.16666">Elmer n</text>
  <path
     d="m 162.89044,243.76271 64.90783,-68.08044 -1.4475,-1.38 -64.90787,68.08036 z m 66.15913,-65.04524 2.6252,-8.5503 -8.4154,3.03 z"
     id="path35" />
  <path
     d="m 162.95467,242.55167 65.408,83.83 -1.577,1.23 -65.407,-83.83 z m 66.953,80.933 1.767,8.768 -8.075,-3.847 z"
     id="path37" />
  <text
     font-family="'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif"
     font-weight="400"
     font-size="16px"
     id="text47"
     x="266.19669"
     y="226.16667">.<tspan
   font-size="16px"
   x="266.19669"
   y="245.16667"
   id="tspan39">.</tspan><tspan
   font-size="16px"
   x="266.19669"
   y="264.16666"
   id="tspan41">.</tspan><tspan
   font-size="13px"
   x="222.01286"
   y="120.16667"
   id="tspan43">n x Independent</tspan><tspan
   font-size="13px"
   x="222.01286"
   y="136.16667"
   id="tspan45">process</tspan></text>
  <path
     d="m 302.58697,170.63505 87.9938,-40.75918 -0.8406,-1.8147 -87.9938,40.75912 z m 88.0448,-37.47658 5.5778,-6.992 -8.9402,-0.2671 z"
     id="path49" />
  <rect
     x="396.66666"
     y="112.66667"
     width="163"
     height="28"
     stroke="#002668"
     stroke-width="1.33333"
     stroke-miterlimit="8"
     fill="#ffffff"
     id="rect51" />
  <text
     font-family="'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif"
     font-weight="400"
     font-size="13px"
     id="text53"
     x="449.51163"
     y="131.16667">Elmer 1.1</text>
  <rect
     x="396.66666"
     y="197.66667"
     width="163"
     height="29"
     stroke="#002668"
     stroke-width="1.33333"
     stroke-miterlimit="8"
     fill="#ffffff"
     id="rect55" />
  <text
     font-family="'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif"
     font-weight="400"
     font-size="13px"
     id="text65"
     x="447.59464"
     y="216.16667">Elmer 1.m<tspan
   font-size="16px"
   x="473.65128"
   y="150.16667"
   id="tspan57">.</tspan><tspan
   font-size="16px"
   x="473.65128"
   y="169.16667"
   id="tspan59">.</tspan><tspan
   font-size="16px"
   x="473.65128"
   y="188.16667"
   id="tspan61">.</tspan><tspan
   font-size="13px"
   x="390.76236"
   y="100.16667"
   id="tspan63">m x dependent processes (MPI)</tspan></text>
  <path
     d="m 302.57067,169.25167 87.945,38.841 -0.808,1.829 -87.945,-38.84 z m 87.937,35.558 5.702,6.891 -8.934,0.427 z"
     id="path67" />
  <path
     d="m 560.63541,126.2552 67.10398,20.75742 -0.61652,0.97746 -67.10398,-20.75689 z m 67.09788,19.00292 4.35075,3.68269 -6.81684,0.2282 z"
     id="path67-8"
     style="stroke-width:3779.53;stroke-dasharray:none" />
  <path
     d="m 561.74744,126.80985 66.54071,-17.4695 -0.61134,-0.82263 -66.54071,17.46905 z m 66.53467,-15.99291 4.31423,-3.09936 -6.75962,-0.19205 z"
     id="path67-8-0"
     style="stroke-width:3779.53;stroke-dasharray:none" />
  <path
     d="m 561.07399,207.38184 67.10398,20.75742 -0.61652,0.97746 -67.10398,-20.75689 z m 67.09788,19.00292 4.35075,3.68269 -6.81684,0.2282 z"
     id="path67-8-06"
     style="stroke-width:3779.53;stroke-dasharray:none" />
  <path
     d="m 562.18602,207.93649 66.54071,-17.4695 -0.61134,-0.82263 -66.54071,17.46905 z m 66.53467,-15.99291 4.31423,-3.09936 -6.75962,-0.19205 z"
     id="path67-8-0-8"
     style="stroke-width:3779.53;stroke-dasharray:none" />
  <path
     d="m 302.58697,332.63505 87.9938,-40.75918 -0.8406,-1.8147 -87.9938,40.75912 z m 88.0448,-37.47658 5.5778,-6.992 -8.9402,-0.2671 z"
     id="path69" />
  <rect
     x="396.66666"
     y="274.66666"
     width="163"
     height="28"
     stroke="#002668"
     stroke-width="1.33333"
     stroke-miterlimit="8"
     fill="#ffffff"
     id="rect71" />
  <text
     font-family="'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif"
     font-weight="400"
     font-size="13px"
     id="text73"
     x="449.51163"
     y="293.16666">Elmer n.1</text>
  <rect
     x="396.66666"
     y="359.66666"
     width="163"
     height="29"
     stroke="#002668"
     stroke-width="1.33333"
     stroke-miterlimit="8"
     fill="#ffffff"
     id="rect75" />
  <text
     font-family="'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif"
     font-weight="400"
     font-size="13px"
     id="text85"
     x="447.59464"
     y="378.16666" />
  <path
     d="m 302.57067,331.25167 87.945,38.841 -0.808,1.829 -87.945,-38.84 z m 87.937,35.558 5.702,6.891 -8.934,0.427 z"
     id="path87" />
  <text
     xml:space="preserve"
     style="fill:#000000"
     x="648.46881"
     y="30.850662"
     id="text1"><tspan
       sodipodi:role="line"
       id="tspan1"></tspan></text>
  <text
     xml:space="preserve"
     id="text2"
     style="fill:#0ae394;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-feature-settings:normal;font-variation-settings:normal;text-indent:0;text-align:start;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;white-space:pre;opacity:1;vector-effect:none;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;-inkscape-stroke:none;shape-inside:url(#rect3)" />
  <text
     xml:space="preserve"
     id="text3"
     style="fill:#0ae394;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-feature-settings:normal;font-variation-settings:normal;text-indent:0;text-align:start;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;white-space:normal;opacity:1;vector-effect:none;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;-inkscape-stroke:none;stop-color:#000000;stop-opacity:1"><tspan
       sodipodi:role="line"
       id="tspan4"
       style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-feature-settings:normal;font-variation-settings:normal;text-indent:0;text-align:start;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;white-space:normal;vector-effect:none;fill:#0ae394;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;-inkscape-stroke:none;stop-color:#000000;stop-opacity:1"></tspan></text>
  <text
     xml:space="preserve"
     id="text4"
     style="fill:#0ae394;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-feature-settings:normal;font-variation-settings:normal;text-indent:0;text-align:start;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;white-space:pre;opacity:1;vector-effect:none;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;-inkscape-stroke:none;shape-inside:url(#rect5)" />
  <text
     fill="#0ae394"
     font-family="'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif"
     font-weight="400"
     font-size="19px"
     id="text95"
     x="218.24649"
     y="26.451612">First level of <tspan
   font-size="19px"
   x="210.0798"
   y="49.451614"
   id="tspan89">Parallelization</tspan><tspan
   font-size="19px"
   x="417.46048"
   y="26.451612"
   id="tspan91">Second level of</tspan><tspan
   font-size="19px"
   x="422.71347"
   y="49.451614"
   id="tspan93">Parallelization</tspan></text>
  <text
     xml:space="preserve"
     style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:19px;line-height:normal;font-family:'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-feature-settings:normal;font-variation-settings:normal;text-indent:0;text-align:start;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;white-space:pre;inline-size:143.749;opacity:1;vector-effect:none;fill:#0ae394;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;-inkscape-stroke:none"
     x="690.20795"
     y="30.245747"
     id="text6"
     transform="translate(-39.924386,-4.5441316)"><tspan
       x="690.20795"
       y="30.245747"
       id="tspan2">Third level of </tspan><tspan
       x="690.20795"
       y="53.995747"
       id="tspan3">Parallelization</tspan></text>
  <text
     xml:space="preserve"
     style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:19px;line-height:normal;font-family:'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-feature-settings:normal;font-variation-settings:normal;text-indent:0;text-align:start;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;white-space:normal;opacity:1;vector-effect:none;fill:#0ae394;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;-inkscape-stroke:none"
     x="692.02271"
     y="154.85822"
     id="text7"><tspan
       sodipodi:role="line"
       id="tspan7"></tspan></text>
  <text
     xml:space="preserve"
     style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.3333px;line-height:normal;font-family:'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-feature-settings:normal;font-variation-settings:normal;text-indent:0;text-align:start;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;white-space:pre;inline-size:168.014;opacity:1;vector-effect:none;fill:#0ae394;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;-inkscape-stroke:none"
     x="643.02454"
     y="75.614372"
     id="text8"
     transform="translate(-4.2344045,-4.8393197)"><tspan
       x="643.02454"
       y="75.614372"
       id="tspan6"><tspan
         style="fill:#000000"
         id="tspan5"> t x dependent threads for </tspan></tspan><tspan
       x="643.02454"
       y="91.030997"
       id="tspan9"><tspan
         style="fill:#000000"
         id="tspan8">each process (OpenMP)</tspan></tspan></text>
  <text
     xml:space="preserve"
     style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.3333px;line-height:normal;font-family:'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-feature-settings:normal;font-variation-settings:normal;text-indent:0;text-align:start;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;white-space:pre;inline-size:168.014;vector-effect:none;fill:#0ae394;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;-inkscape-stroke:none"
     x="643.02454"
     y="75.614372"
     id="text8-4"
     transform="translate(-235.22198,176.10752)" />
  <rect
     x="630.82715"
     y="100.93867"
     width="158.91345"
     height="22.703619"
     stroke="#002668"
     stroke-width="1.18548"
     stroke-miterlimit="8"
     fill="#ffffff"
     id="rect51-9" />
  <rect
     x="630.39612"
     y="133.59274"
     width="158.91345"
     height="22.703619"
     stroke="#002668"
     stroke-width="1.18548"
     stroke-miterlimit="8"
     fill="#ffffff"
     id="rect51-9-4" />
  <text
     xml:space="preserve"
     style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.3333px;line-height:normal;font-family:'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-feature-settings:normal;font-variation-settings:normal;text-indent:0;text-align:start;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;white-space:normal;vector-effect:none;fill:#0ae394;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;-inkscape-stroke:none"
     x="680.12286"
     y="116.54675"
     id="text8-0"><tspan
       sodipodi:role="line"
       x="680.12286"
       y="116.54675"
       style="font-size:12.3333px;fill:#000000;fill-opacity:1"
       id="tspan9-8">Elmer 1.1.1</tspan></text>
  <text
     xml:space="preserve"
     style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.3333px;line-height:normal;font-family:'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-feature-settings:normal;font-variation-settings:normal;text-indent:0;text-align:start;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;white-space:normal;opacity:1;vector-effect:none;fill:#000000;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;-inkscape-stroke:none"
     x="681.42969"
     y="148.80908"
     id="text10"><tspan
       sodipodi:role="line"
       id="tspan10"
       x="681.42969"
       y="148.80908">Elmer 1.1.t</tspan></text>
  <text
     xml:space="preserve"
     style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.3333px;line-height:normal;font-family:'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-feature-settings:normal;font-variation-settings:normal;text-indent:0;text-align:start;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;white-space:normal;opacity:1;vector-effect:none;fill:#000000;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;-inkscape-stroke:none"
     x="701.09644"
     y="129.45181"
     id="text11"><tspan
       sodipodi:role="line"
       id="tspan11"
       x="701.09644"
       y="129.45181">. . .</tspan></text>
  <text
     xml:space="preserve"
     style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:30.8634px;line-height:normal;font-family:'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-feature-settings:normal;font-variation-settings:normal;text-indent:0;text-align:start;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;white-space:normal;vector-effect:none;fill:#000000;fill-opacity:1;stroke-width:2.50245;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;-inkscape-stroke:none"
     x="819.12262"
     y="143.86827"
     id="text11-7"
     transform="scale(0.84542794,1.1828329)"><tspan
       sodipodi:role="line"
       id="tspan11-7"
       x="819.12262"
       y="143.86827"
       style="stroke-width:2.50245">. . .</tspan></text>
  <text
     xml:space="preserve"
     style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:30.8634px;line-height:normal;font-family:'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-feature-settings:normal;font-variation-settings:normal;text-indent:0;text-align:start;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;white-space:normal;vector-effect:none;fill:#000000;fill-opacity:1;stroke-width:2.50245;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;-inkscape-stroke:none"
     x="819.75323"
     y="212.94087"
     id="text11-7-0"
     transform="scale(0.84542795,1.1828329)"><tspan
       sodipodi:role="line"
       id="tspan11-7-0"
       x="819.75323"
       y="212.94087"
       style="stroke-width:2.50245">. . .</tspan></text>
  <rect
     x="630.99725"
     y="181.48122"
     width="158.91345"
     height="22.703619"
     stroke="#002668"
     stroke-width="1.18548"
     stroke-miterlimit="8"
     fill="#ffffff"
     id="rect51-9-6" />
  <rect
     x="630.56622"
     y="214.13528"
     width="158.91345"
     height="22.703619"
     stroke="#002668"
     stroke-width="1.18548"
     stroke-miterlimit="8"
     fill="#ffffff"
     id="rect51-9-4-7" />
  <text
     xml:space="preserve"
     style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.3333px;line-height:normal;font-family:'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-feature-settings:normal;font-variation-settings:normal;text-indent:0;text-align:start;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;white-space:normal;vector-effect:none;fill:#0ae394;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;-inkscape-stroke:none"
     x="680.29297"
     y="197.08929"
     id="text8-0-2"><tspan
       sodipodi:role="line"
       x="680.29297"
       y="197.08929"
       style="font-size:12.3333px;fill:#000000;fill-opacity:1"
       id="tspan9-8-8">Elmer 1.m.1</tspan></text>
  <text
     xml:space="preserve"
     style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.3333px;line-height:normal;font-family:'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-feature-settings:normal;font-variation-settings:normal;text-indent:0;text-align:start;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;white-space:normal;vector-effect:none;fill:#000000;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;-inkscape-stroke:none"
     x="681.59979"
     y="229.35162"
     id="text10-3"><tspan
       sodipodi:role="line"
       id="tspan10-5"
       x="681.59979"
       y="229.35162">Elmer 1.m.t</tspan></text>
  <text
     xml:space="preserve"
     style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.3333px;line-height:normal;font-family:'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-feature-settings:normal;font-variation-settings:normal;text-indent:0;text-align:start;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;white-space:normal;vector-effect:none;fill:#000000;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;-inkscape-stroke:none"
     x="701.26654"
     y="209.99435"
     id="text11-2"><tspan
       sodipodi:role="line"
       id="tspan11-3"
       x="701.26654"
       y="209.99435">. . .</tspan></text>
  <rect
     x="631.07477"
     y="263.76477"
     width="158.91345"
     height="22.703619"
     stroke="#002668"
     stroke-width="1.18548"
     stroke-miterlimit="8"
     fill="#ffffff"
     id="rect51-9-5" />
  <rect
     x="630.64374"
     y="296.41885"
     width="158.91345"
     height="22.703619"
     stroke="#002668"
     stroke-width="1.18548"
     stroke-miterlimit="8"
     fill="#ffffff"
     id="rect51-9-4-8" />
  <text
     xml:space="preserve"
     style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.3333px;line-height:normal;font-family:'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-feature-settings:normal;font-variation-settings:normal;text-indent:0;text-align:start;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;white-space:normal;vector-effect:none;fill:#0ae394;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;-inkscape-stroke:none"
     x="680.37048"
     y="279.37286"
     id="text8-0-6"><tspan
       sodipodi:role="line"
       x="680.37048"
       y="279.37286"
       style="font-size:12.3333px;fill:#000000;fill-opacity:1"
       id="tspan9-8-9">Elmer n.1.1</tspan></text>
  <text
     xml:space="preserve"
     style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.3333px;line-height:normal;font-family:'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-feature-settings:normal;font-variation-settings:normal;text-indent:0;text-align:start;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;white-space:normal;vector-effect:none;fill:#000000;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;-inkscape-stroke:none"
     x="681.67731"
     y="311.63519"
     id="text10-0"><tspan
       sodipodi:role="line"
       id="tspan10-8"
       x="681.67731"
       y="311.63519">Elmer n.1.t</tspan></text>
  <text
     xml:space="preserve"
     style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.3333px;line-height:normal;font-family:'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-feature-settings:normal;font-variation-settings:normal;text-indent:0;text-align:start;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;white-space:normal;vector-effect:none;fill:#000000;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;-inkscape-stroke:none"
     x="701.34406"
     y="292.27792"
     id="text11-9"><tspan
       sodipodi:role="line"
       id="tspan11-8"
       x="701.34406"
       y="292.27792">. . .</tspan></text>
  <rect
     x="632.27515"
     y="347.50391"
     width="158.91345"
     height="22.703619"
     stroke="#002668"
     stroke-width="1.18548"
     stroke-miterlimit="8"
     fill="#ffffff"
     id="rect51-9-9" />
  <rect
     x="631.84412"
     y="380.15799"
     width="158.91345"
     height="22.703619"
     stroke="#002668"
     stroke-width="1.18548"
     stroke-miterlimit="8"
     fill="#ffffff"
     id="rect51-9-4-0" />
  <text
     xml:space="preserve"
     style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.3333px;line-height:normal;font-family:'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-feature-settings:normal;font-variation-settings:normal;text-indent:0;text-align:start;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;white-space:normal;vector-effect:none;fill:#0ae394;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;-inkscape-stroke:none"
     x="681.57086"
     y="363.112"
     id="text8-0-23"><tspan
       sodipodi:role="line"
       x="681.57086"
       y="363.112"
       style="font-size:12.3333px;fill:#000000;fill-opacity:1"
       id="tspan9-8-0">Elmer n.m.1</tspan></text>
  <text
     xml:space="preserve"
     style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.3333px;line-height:normal;font-family:'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-feature-settings:normal;font-variation-settings:normal;text-indent:0;text-align:start;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;white-space:normal;vector-effect:none;fill:#000000;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;-inkscape-stroke:none"
     x="682.87769"
     y="395.37433"
     id="text10-7"><tspan
       sodipodi:role="line"
       id="tspan10-3"
       x="682.87769"
       y="395.37433">Elmer n.m.t</tspan></text>
  <text
     xml:space="preserve"
     style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.3333px;line-height:normal;font-family:'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-feature-settings:normal;font-variation-settings:normal;text-indent:0;text-align:start;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;white-space:normal;vector-effect:none;fill:#000000;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;-inkscape-stroke:none"
     x="702.54443"
     y="376.01706"
     id="text11-3"><tspan
       sodipodi:role="line"
       id="tspan11-0"
       x="702.54443"
       y="376.01706">. . .</tspan></text>
  <path
     d="m 560.86227,288.00188 67.10398,20.75742 -0.61652,0.97746 -67.10398,-20.75689 z m 67.09788,19.00292 4.35075,3.68269 -6.81684,0.2282 z"
     id="path67-8-6"
     style="stroke-width:3779.53;stroke-dasharray:none" />
  <path
     d="m 561.9743,288.55653 66.54071,-17.4695 -0.61134,-0.82263 -66.54071,17.46905 z m 66.53467,-15.99291 4.31423,-3.09936 -6.75962,-0.19205 z"
     id="path67-8-0-6"
     style="stroke-width:3779.53;stroke-dasharray:none" />
  <path
     d="m 560.83958,374.89035 67.10398,20.75742 -0.61652,0.97746 -67.10398,-20.75689 z m 67.09788,19.00292 4.35075,3.68269 -6.81684,0.2282 z"
     id="path67-8-1"
     style="stroke-width:3779.53;stroke-dasharray:none" />
  <path
     d="m 561.95161,375.445 66.54071,-17.4695 -0.61134,-0.82263 -66.54071,17.46905 z m 66.53467,-15.99291 4.31423,-3.09936 -6.75962,-0.19205 z"
     id="path67-8-0-5"
     style="stroke-width:3779.53;stroke-dasharray:none" />
  <text
     xml:space="preserve"
     style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:30.8634px;line-height:normal;font-family:'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-feature-settings:normal;font-variation-settings:normal;text-indent:0;text-align:start;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;white-space:normal;vector-effect:none;fill:#000000;fill-opacity:1;stroke-width:2.50245;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;-inkscape-stroke:none"
     x="821.31165"
     y="283.55249"
     id="text11-7-7"
     transform="scale(0.84542795,1.1828329)"><tspan
       sodipodi:role="line"
       id="tspan11-7-4"
       x="821.31165"
       y="283.55249"
       style="stroke-width:2.50245">. . .</tspan></text>
  <text
     font-family="'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif"
     font-weight="400"
     font-size="13px"
     id="text73-6"
     x="449.99677"
     y="378.78384">Elmer n.m</text>
  <text
     xml:space="preserve"
     style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:13px;line-height:normal;font-family:'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-feature-settings:normal;font-variation-settings:normal;text-indent:0;text-align:start;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;white-space:normal;opacity:1;fill:#000000;fill-opacity:1;stroke-width:3779.53;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"
     x="391.98486"
     y="260.11343"
     id="text13"><tspan
       sodipodi:role="line"
       id="tspan13"
       x="391.98486"
       y="260.11343"
       style="font-size:13px">m x dependent processes(MPI)</tspan></text>
  <text
     xml:space="preserve"
     style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:13px;line-height:normal;font-family:'Microsoft Sans Serif', 'Microsoft Sans Serif_MSFontService', sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-feature-settings:normal;font-variation-settings:normal;text-indent:0;text-align:start;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;white-space:normal;opacity:1;fill:#000000;fill-opacity:1;stroke-width:3779.53;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"
     x="474.85822"
     y="315.16068"
     id="text14"><tspan
       sodipodi:role="line"
       id="tspan14"
       x="474.85822"
       y="315.16068">.</tspan><tspan
       sodipodi:role="line"
       x="474.85822"
       y="331.41068"
       id="tspan15">.</tspan><tspan
       sodipodi:role="line"
       x="474.85822"
       y="347.66068"
       id="tspan16">.</tspan></text>
</svg>
<p>The total number of threads running in parallel will then be <code class="docutils literal notranslate"><span class="pre">n_workers*elmer_n_processes*elmer_n_threads</span></code> .
Requesting more computing resources than available might lead to poor performance.</p>
<p>If the parallelization settings are not explicitly stated in <code class="docutils literal notranslate"><span class="pre">workflow</span></code>, the simulations are run sequentially. If the any
of the numbers are set to <code class="docutils literal notranslate"><span class="pre">-1</span></code>, then as many processes/threads are used as available on the machine. For example in
<cite>waveguides_sim_compare.py</cite> defining the following will use two parallel workers for independent computation, with the number of
dependent processes automatically chosen. If there are 10 threads available on the computer then <code class="docutils literal notranslate"><span class="pre">elmer_n_processes</span></code> will be set
automatically to <code class="docutils literal notranslate"><span class="pre">floor(</span> <span class="pre">10</span> <span class="pre">/</span> <span class="pre">n_workers)</span></code> = 5.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">workflow</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;run_gmsh_gui&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>    <span class="c1"># &lt;-------- For GMSH: if true, the mesh is shown after it is done, for large</span>
                             <span class="c1">#           meshes this can take a long time</span>
    <span class="s1">&#39;run_elmergrid&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>   <span class="c1"># &lt;-------- Run ElmerGrid to process the meshes to Elmer supported format</span>
    <span class="s1">&#39;run_elmer&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>       <span class="c1"># &lt;-------- Run Elmer</span>
    <span class="s1">&#39;run_paraview&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>    <span class="c1"># &lt;-------- Open visual view of the results. Can be set to False to speed up the process</span>
    <span class="s1">&#39;python_executable&#39;</span><span class="p">:</span> <span class="s1">&#39;python&#39;</span><span class="p">,</span> <span class="c1"># &lt;-- Can be used to choose alternative python executable. For example this could</span>
                                   <span class="c1">#     point to the singularity image via the symbolic link ``kqclib`` or full path</span>
    <span class="s1">&#39;n_workers&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="c1"># &lt;----------------- This defines the number of parallel independent processes. Can be used</span>
                    <span class="c1">#                    To parallelize different simulations in a parameter sweep.</span>
                    <span class="c1">#                    Setting this larger than 1 activates the use of the simple workload manager.</span>
    <span class="s1">&#39;elmer_n_processes&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>   <span class="c1"># &lt;------ This defines the number of</span>
                               <span class="c1">#         processes in the second level</span>
                               <span class="c1">#         of parallelization. -1 uses all</span>
                               <span class="c1">#         the physical cores (based on</span>
                               <span class="c1">#         the machine which was used to</span>
                               <span class="c1">#         prepare the simulation)</span>
    <span class="s1">&#39;elmer_n_threads&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>  <span class="c1"># &lt;---------- This defines the number of omp threads per process</span>
    <span class="s1">&#39;gmsh_n_threads&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="c1"># &lt;---------- This defines the number of processes in the</span>
                           <span class="c1">#             second level of parallelization. -1 uses all</span>
                           <span class="c1">#             the physical cores (based on the machine which</span>
                           <span class="c1">#             was used to prepare the simulation).</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Additionally, Slurm is supported for cluster computing (also available for desktop computers with Linux/BSD operating systems). Slurm can be used by
defining <code class="docutils literal notranslate"><span class="pre">workflow['sbatch_parameters']</span></code> in the export script. An example can be found in <code class="docutils literal notranslate"><span class="pre">waveguides_sim_compare.py</span></code></p>
<p>When using Slurm the simulation is run in 2 parts as Gmsh benefits from using multiple threads while Elmer benefits from using multiple processes.</p>
<ol class="arabic simple">
<li><p>“Gmsh” part, also contains ElmerGrid calls and writing Elmer sifs. Only multithreading with single task and node</p></li>
<li><p>“Elmer” part. Runs ElmerSolver with any requested resources. Also runs writing the results and project version with single thread</p></li>
</ol>
<p>Instead of forwarding the settings directly to <code class="docutils literal notranslate"><span class="pre">sbatch</span></code> command from <code class="docutils literal notranslate"><span class="pre">workflow[sbatch_parameters]</span></code>, the following custom options are used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">workflow</span><span class="p">[</span><span class="s1">&#39;sbatch_parameters&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;n_workers&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>             <span class="c1"># &lt;-- Number of parallel simulations, the total amount of resources requested</span>
                                <span class="c1">#     is `n_workers` times the definitions below for single simulation</span>
    <span class="s1">&#39;max_threads_per_node&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="c1"># &lt;-- Max number of tasks allowed on a node. dependent on the used remote host</span>
                                <span class="c1">#     Automatically divides the tasks to as few nodes as possible</span>
    <span class="s1">&#39;elmer_n_processes&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span>     <span class="c1"># &lt;-- Number of tasks per simulation</span>
    <span class="s1">&#39;elmer_n_threads&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>        <span class="c1"># &lt;-- Number of threads per task</span>
    <span class="s1">&#39;elmer_mem&#39;</span><span class="p">:</span><span class="s1">&#39;64G&#39;</span><span class="p">,</span>          <span class="c1"># &lt;-- Amount of memory per simulation</span>
    <span class="s1">&#39;elmer_time&#39;</span><span class="p">:</span><span class="s1">&#39;00:10:00&#39;</span><span class="p">,</span>    <span class="c1"># &lt;-- Maximum time per simulation</span>

    <span class="s1">&#39;gmsh_n_threads&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span>        <span class="c1"># &lt;-- Threads per simulation</span>
    <span class="s1">&#39;gmsh_mem&#39;</span><span class="p">:</span><span class="s1">&#39;64G&#39;</span><span class="p">,</span>           <span class="c1"># &lt;-- Allocated memory per simulation</span>
    <span class="s1">&#39;gmsh_time&#39;</span><span class="p">:</span><span class="s1">&#39;00:10:00&#39;</span><span class="p">,</span>     <span class="c1"># &lt;-- Maximum time per simulation</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Additionally the account and partition info must be given:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">workflow</span><span class="p">[</span><span class="s1">&#39;sbatch_parameters&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;--account&#39;</span><span class="p">:</span><span class="s1">&#39;project_0&#39;</span><span class="p">,</span>    <span class="c1"># &lt;-- Remote account for billing</span>
    <span class="s1">&#39;--partition&#39;</span><span class="p">:</span><span class="s1">&#39;test&#39;</span><span class="p">,</span>       <span class="c1"># &lt;-- Slurm partition used, options depend on the remote</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The account can alternatively be set with an environment variable <code class="docutils literal notranslate"><span class="pre">KQC_REMOTE_ACCOUNT</span></code>. All other keys in
<code class="docutils literal notranslate"><span class="pre">workflow['sbatch_parameters']</span></code> starting with <code class="docutils literal notranslate"><span class="pre">--</span></code> are used directly in both parts of the simulation.
However, note that the custom parameters might overwrite these. Keys without <code class="docutils literal notranslate"><span class="pre">--</span></code>, which are none of the above are ignored.</p>
<p>By running <code class="docutils literal notranslate"><span class="pre">RES=$(sbatch</span> <span class="pre">./simulation_meshes.sh)</span> <span class="pre">&amp;&amp;</span> <span class="pre">sbatch</span> <span class="pre">-d</span> <span class="pre">afterok:${RES##*</span> <span class="pre">}</span> <span class="pre">./simulation.sh</span></code>, the tasks will be sent to
Slurm workload manager such that the Elmer part will only start once processing the meshes is finished.
For running the simulations on a remote machine see <a class="reference internal" href="elmer_remote_workflow.html#elmer-remote-workflow"><span class="std std-ref">Elmer remote simulations workflow</span></a>.</p>
<p>We recommend using the <cite>n_workers</cite> approach for simple systems when computing queues are not needed (no shared resources),
and Slurm approach for more complicated resource allocations (for example multiple users using the same machine).</p>
<p>Gmsh can also be parallelized using OpenMP:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">workflow</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;gmsh_n_threads&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="c1"># &lt;---------- This defines the number of processes in the</span>
                           <span class="c1">#             second level of parallelization</span>
                           <span class="c1">#             -1 uses all the physical cores (based on the machine</span>
                           <span class="c1">#             which was used to prepare the simulation)</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Please note that running the example requires the installation of</p>
<ul class="simple">
<li><p>Gmsh python API <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">gmsh</span></code> or in secure mode <code class="docutils literal notranslate"><span class="pre">pip-sync</span> <span class="pre">requirements.txt</span> <span class="pre">sim-requirements.txt</span> <span class="pre">[...]</span></code></p></li>
<li><p>Elmerfem solver,
see <a class="reference external" href="https://github.com/ElmerCSC/elmerfem">https://github.com/ElmerCSC/elmerfem</a></p></li>
<li><p>Paraview
<a class="reference external" href="https://www.paraview.org/">https://www.paraview.org/</a></p></li>
</ul>
<p>Gmsh API suffices if one needs to only generate the mesh.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If one does not want to install all the software to their computer (for example Gmsh or Elmer),
there is a possibility to use the <cite>singularity</cite> image. See <a class="reference internal" href="../../developer/containers.html#singularity-image"><span class="std std-ref">Singularity usage</span></a>.</p>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="simulation_features.html" class="btn btn-neutral float-left" title="Simulation features" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="export_and_run.html" class="btn btn-neutral float-right" title="Run and export in one line" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021-2024, IQM.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>