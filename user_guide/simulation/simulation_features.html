<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Simulation features &mdash; KQCircuits  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/logo.svg"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Gmsh/Elmer export" href="gmsh_elmer_export.html" />
    <link rel="prev" title="Export functions" href="simulation_scripts.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/logo-small.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../installation.html#klayout">KLayout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../installation.html#known-installation-issues">Known installation issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../installation.html#installing-different-python-package-versions-to-klayout-manually">Installing different Python package versions to KLayout manually</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../salt.html">Getting started (Salt package)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../salt.html#installing-kqcircuits-salt-package">Installing KQCircuits Salt Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../salt.html#first-look-around">First look around</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../salt.html#setting-up-a-user-package-directory">Setting up a user package directory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../salt.html#defining-a-custom-element">Defining a custom element</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../salt.html#defining-a-custom-chip">Defining a custom chip</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../salt.html#upgrading-or-removing-salt-package">Upgrading or Removing Salt Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../salt.html#release-notes">Release Notes</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../usage.html">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gui_features.html">GUI Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gui_features.html#useful-hotkeys">Useful hotkeys</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gui_features.html#introduction-to-elements">Introduction to Elements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gui_features.html#placing-elements">Placing Elements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gui_features.html#modifying-element-parameters">Modifying Element parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gui_features.html#modifying-waveguides">Modifying waveguides</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gui_features.html#editing-waveguidecomposite-nodes">Editing WaveguideComposite Nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gui_features.html#converting-elements-placed-in-gui-into-code">Converting elements placed in GUI into code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gui_features.html#useful-menu-commands">Useful Menu Commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../gui_workflow.html">Point-and-click workflow tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python_workflow.html">Python workflow tutorial</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../python_workflow.html#file-system-hierarchy">File system hierarchy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../python_workflow.html#structure-of-element-code">Structure of Element code</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../python_workflow.html#element-class"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code> class</a></li>
<li class="toctree-l4"><a class="reference internal" href="../python_workflow.html#libraries">Libraries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../python_workflow.html#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../python_workflow.html#build">Build</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../python_workflow.html#example-of-defining-an-element-class">Example of defining an <code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code> class</a></li>
<li class="toctree-l3"><a class="reference internal" href="../python_workflow.html#example-of-defining-a-chip-and-inserting-elements-into-it">Example of defining a Chip and inserting elements into it</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../python_workflow.html#defining-sampleholder-types">Defining sampleholder types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../python_workflow.html#refpoints">Refpoints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../python_workflow.html#kqcircuits-layers">KQCircuits’ Layers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../python_workflow.html#faces">Faces</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../python_workflow.html#layer-configuration-files">Layer configuration files</a></li>
<li class="toctree-l4"><a class="reference internal" href="../python_workflow.html#adding-a-new-face">Adding a new face</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../python_workflow.html#opening-element-or-chip-from-an-ide">Opening <code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">Chip</span></code> from an IDE</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../macro_workflow.html">Macro development</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../macro_workflow.html#running-the-first-example">Running the first example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../macro_workflow.html#interacting-with-the-klayout-application">Interacting with the KLayout application</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../macro_workflow.html#creating-a-new-panel">Creating a new panel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../macro_workflow.html#accessing-the-currently-active-panel">Accessing the currently active panel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../macro_workflow.html#using-klayoutview">Using <code class="docutils literal notranslate"><span class="pre">KLayoutView</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../macro_workflow.html#debugger">Debugger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../macro_workflow.html#reloading-libraries">Reloading libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../macro_workflow.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mask_export.html">Mask export</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../mask_export.html#tutorial">Tutorial</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../mask_export.html#basic-mask-script-and-export">Basic mask script and export</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mask_export.html#ground-grid">Ground grid</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mask_export.html#adding-and-modifying-chips">Adding and modifying chips</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mask_export.html#multi-face-masks">Multi-face masks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mask_export.html#composite-mask-maps">Composite mask maps</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../simulations.html">External simulation tools</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="simulation_objects.html">Simulation objects</a><ul>
<li class="toctree-l4"><a class="reference internal" href="simulation_objects.html#the-simulation-class">The Simulation class</a></li>
<li class="toctree-l4"><a class="reference internal" href="simulation_objects.html#simulation-subclass">Simulation subclass</a></li>
<li class="toctree-l4"><a class="reference internal" href="simulation_objects.html#geometry-sweeps">Geometry sweeps</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="simulation_scripts.html">Export functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="simulation_scripts.html#ansys-export">Ansys export</a></li>
<li class="toctree-l4"><a class="reference internal" href="simulation_scripts.html#elmer-export">Elmer export</a></li>
<li class="toctree-l4"><a class="reference internal" href="simulation_scripts.html#geometry-from-klayout-gui">Geometry from Klayout GUI</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Simulation features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#s-parameter-matrix">S-parameter matrix</a></li>
<li class="toctree-l4"><a class="reference internal" href="#capacitance-matrix">Capacitance matrix</a></li>
<li class="toctree-l4"><a class="reference internal" href="#eigenmode">Eigenmode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#energy-integrals-and-participation-ratio">Energy integrals and participation ratio</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cross-sectional-simulations">Cross-sectional simulations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pyepr">pyEPR</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="gmsh_elmer_export.html">Gmsh/Elmer export</a></li>
<li class="toctree-l3"><a class="reference internal" href="export_and_run.html">Run and export in one line</a></li>
<li class="toctree-l3"><a class="reference internal" href="elmer_remote_workflow.html">Elmer remote simulations workflow</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../file_system_and_utilities.html">General Structure and Miscellaneous Utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../file_system_and_utilities.html#file-system-hierarchy">File system hierarchy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../file_system_and_utilities.html#miscellaneous-utilities">Miscellaneous Utilities</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../xsection.html">Creating cross section images</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../xsection.html#klayout-gui-xsection-tool">KLayout GUI XSection tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../xsection.html#xsection-call-in-kqc-code">XSection call in KQC code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../xsection.html#process-files-xs">Process files (.xs)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../terminology.html">Terminology</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Developer Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../developer/setup.html">Developer Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer/setup.html#prerequisites">Prerequisites</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer/setup.html#python">Python</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/setup.html#sources">Sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/setup.html#install">Install</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/setup.html#unlinking">Unlinking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/setup.html#update">Update</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/setup.html#secondary-install">Secondary install</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/setup.html#manual-installation">Manual installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer/setup.html#linux-or-macos">Linux or MacOS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/setup.html#windows">Windows</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/standalone.html">KLayout Standalone Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer/standalone.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/standalone.html#installation">Installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer/standalone.html#standard-not-secure-installation">Standard, Not Secure Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/standalone.html#reproducible-secure-installation">Reproducible, Secure Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/standalone.html#pypi-installation">PyPI Installation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/standalone.html#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/standalone.html#jupyter-notebook-usage">Jupyter notebook usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/standalone.html#updating-the-required-dependencies">Updating the required dependencies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/containers.html">Containers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer/containers.html#cli-usage">CLI usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/containers.html#docker-ci-usage">Docker CI usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/containers.html#singularity-usage">Singularity usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/architecture.html">Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer/architecture.html#elements">Elements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/architecture.html#pcell-parameters">PCell parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/architecture.html#libraries">Libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/architecture.html#pya-resolver">pya resolver</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/testing.html">Testing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer/testing.html#unit-tests">Unit tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/coding_style.html">Coding Style</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/documentation.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing.html">Contributing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../contributing.html#versioning">Versioning</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../api/kqcircuits.html">API documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.chips.html">kqcircuits.chips</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.airbridge_crossings.html">kqcircuits.chips.airbridge_crossings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.airbridge_dc_test.html">kqcircuits.chips.airbridge_dc_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.chip.html">kqcircuits.chips.chip</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.crossing_twoface.html">kqcircuits.chips.crossing_twoface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.daisy_woven.html">kqcircuits.chips.daisy_woven</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.dc_test.html">kqcircuits.chips.dc_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.demo.html">kqcircuits.chips.demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.demo_twoface.html">kqcircuits.chips.demo_twoface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.empty.html">kqcircuits.chips.empty</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.junction_test.html">kqcircuits.chips.junction_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.junction_test2.html">kqcircuits.chips.junction_test2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.launchers.html">kqcircuits.chips.launchers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.lithography_test.html">kqcircuits.chips.lithography_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.lithography_test_twoface.html">kqcircuits.chips.lithography_test_twoface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.quality_factor.html">kqcircuits.chips.quality_factor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.quality_factor_twoface.html">kqcircuits.chips.quality_factor_twoface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.sample_holder_test.html">kqcircuits.chips.sample_holder_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.shaping.html">kqcircuits.chips.shaping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.simple.html">kqcircuits.chips.simple</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.single_xmons.html">kqcircuits.chips.single_xmons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.stripes.html">kqcircuits.chips.stripes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.tsv_test.html">kqcircuits.chips.tsv_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.xmons_direct_coupling.html">kqcircuits.chips.xmons_direct_coupling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.html#module-kqcircuits.chips">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.elements.html">kqcircuits.elements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.airbridges.html">kqcircuits.elements.airbridges</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.airbridges.airbridge.html">kqcircuits.elements.airbridges.airbridge</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.airbridges.airbridge_multi_face.html">kqcircuits.elements.airbridges.airbridge_multi_face</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.airbridges.airbridge_rectangular.html">kqcircuits.elements.airbridges.airbridge_rectangular</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.airbridges.html#module-kqcircuits.elements.airbridges">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.flip_chip_connectors.html">kqcircuits.elements.flip_chip_connectors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.flip_chip_connectors.flip_chip_connector.html">kqcircuits.elements.flip_chip_connectors.flip_chip_connector</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.flip_chip_connectors.flip_chip_connector_dc.html">kqcircuits.elements.flip_chip_connectors.flip_chip_connector_dc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.flip_chip_connectors.flip_chip_connector_rf.html">kqcircuits.elements.flip_chip_connectors.flip_chip_connector_rf</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.flip_chip_connectors.html#module-kqcircuits.elements.flip_chip_connectors">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.fluxlines.html">kqcircuits.elements.fluxlines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.fluxlines.fluxline.html">kqcircuits.elements.fluxlines.fluxline</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.fluxlines.fluxline_standard.html">kqcircuits.elements.fluxlines.fluxline_standard</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.fluxlines.fluxline_straight.html">kqcircuits.elements.fluxlines.fluxline_straight</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.fluxlines.html#module-kqcircuits.elements.fluxlines">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.markers.html">kqcircuits.elements.markers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.markers.marker.html">kqcircuits.elements.markers.marker</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.markers.marker_standard.html">kqcircuits.elements.markers.marker_standard</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.markers.mask_marker_fc.html">kqcircuits.elements.markers.mask_marker_fc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.markers.html#module-kqcircuits.elements.markers">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.tsvs.html">kqcircuits.elements.tsvs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.tsvs.tsv.html">kqcircuits.elements.tsvs.tsv</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.tsvs.tsv_ellipse.html">kqcircuits.elements.tsvs.tsv_ellipse</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.tsvs.tsv_standard.html">kqcircuits.elements.tsvs.tsv_standard</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.tsvs.html#module-kqcircuits.elements.tsvs">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.airbridge_connection.html">kqcircuits.elements.airbridge_connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.capacitive_x_coupler.html">kqcircuits.elements.capacitive_x_coupler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.chip_frame.html">kqcircuits.elements.chip_frame</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.circular_capacitor.html">kqcircuits.elements.circular_capacitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.element.html">kqcircuits.elements.element</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.finger_capacitor_square.html">kqcircuits.elements.finger_capacitor_square</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.finger_capacitor_taper.html">kqcircuits.elements.finger_capacitor_taper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.hanger_resonator.html">kqcircuits.elements.hanger_resonator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.launcher.html">kqcircuits.elements.launcher</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.launcher_dc.html">kqcircuits.elements.launcher_dc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.meander.html">kqcircuits.elements.meander</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.smooth_capacitor.html">kqcircuits.elements.smooth_capacitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.spiral_resonator_polygon.html">kqcircuits.elements.spiral_resonator_polygon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.waveguide_composite.html">kqcircuits.elements.waveguide_composite</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.waveguide_coplanar.html">kqcircuits.elements.waveguide_coplanar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.waveguide_coplanar_curved.html">kqcircuits.elements.waveguide_coplanar_curved</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.waveguide_coplanar_splitter.html">kqcircuits.elements.waveguide_coplanar_splitter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.waveguide_coplanar_straight.html">kqcircuits.elements.waveguide_coplanar_straight</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.waveguide_coplanar_taper.html">kqcircuits.elements.waveguide_coplanar_taper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.html#module-kqcircuits.elements">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.junctions.html">kqcircuits.junctions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.junctions.junction.html">kqcircuits.junctions.junction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.junctions.manhattan.html">kqcircuits.junctions.manhattan</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.junctions.manhattan_single_junction.html">kqcircuits.junctions.manhattan_single_junction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.junctions.no_squid.html">kqcircuits.junctions.no_squid</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.junctions.sim.html">kqcircuits.junctions.sim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.junctions.squid.html">kqcircuits.junctions.squid</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.junctions.html#module-kqcircuits.junctions">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.layer_config.html">kqcircuits.layer_config</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.layer_config.default_layer_config.html">kqcircuits.layer_config.default_layer_config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.layer_config.example_layer_config.html">kqcircuits.layer_config.example_layer_config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.layer_config.html#module-kqcircuits.layer_config">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.masks.html">kqcircuits.masks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.masks.mask_export.html">kqcircuits.masks.mask_export</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.masks.mask_layout.html">kqcircuits.masks.mask_layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.masks.mask_set.html">kqcircuits.masks.mask_set</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.masks.multi_face_mask_layout.html">kqcircuits.masks.multi_face_mask_layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.masks.html#module-kqcircuits.masks">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.qubits.html">kqcircuits.qubits</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.qubits.concentric_transmon.html">kqcircuits.qubits.concentric_transmon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.qubits.double_pads.html">kqcircuits.qubits.double_pads</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.qubits.double_pads_splines.html">kqcircuits.qubits.double_pads_splines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.qubits.qubit.html">kqcircuits.qubits.qubit</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.qubits.swissmon.html">kqcircuits.qubits.swissmon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.qubits.html#module-kqcircuits.qubits">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.simulations.html">kqcircuits.simulations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.export.html">kqcircuits.simulations.export</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.simulations.export.ansys.html">kqcircuits.simulations.export.ansys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.simulations.export.elmer.html">kqcircuits.simulations.export.elmer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.simulations.export.sonnet.html">kqcircuits.simulations.export.sonnet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.simulations.export.xsection.html">kqcircuits.simulations.export.xsection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.simulations.export.export_and_run.html">kqcircuits.simulations.export.export_and_run</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.simulations.export.export_singularity.html">kqcircuits.simulations.export.export_singularity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.simulations.export.remote_export_and_run.html">kqcircuits.simulations.export.remote_export_and_run</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.simulations.export.simulation_export.html">kqcircuits.simulations.export.simulation_export</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.simulations.export.util.html">kqcircuits.simulations.export.util</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.simulations.export.html#module-kqcircuits.simulations.export">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.airbridges_sim.html">kqcircuits.simulations.airbridges_sim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.cross_section_simulation.html">kqcircuits.simulations.cross_section_simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.empty_simulation.html">kqcircuits.simulations.empty_simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.port.html">kqcircuits.simulations.port</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.simulation.html">kqcircuits.simulations.simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.single_element_simulation.html">kqcircuits.simulations.single_element_simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.single_xmons_full_chip_sim.html">kqcircuits.simulations.single_xmons_full_chip_sim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.waveguides_sim.html">kqcircuits.simulations.waveguides_sim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.xmons_direct_coupling_full_chip_sim.html">kqcircuits.simulations.xmons_direct_coupling_full_chip_sim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.xmons_direct_coupling_sim.html">kqcircuits.simulations.xmons_direct_coupling_sim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.html#module-kqcircuits.simulations">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.test_structures.html">kqcircuits.test_structures</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.test_structures.junction_test_pads.html">kqcircuits.test_structures.junction_test_pads</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.test_structures.junction_test_pads.junction_test_pads.html">kqcircuits.test_structures.junction_test_pads.junction_test_pads</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.test_structures.junction_test_pads.junction_test_pads_simple.html">kqcircuits.test_structures.junction_test_pads.junction_test_pads_simple</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.test_structures.junction_test_pads.html#module-kqcircuits.test_structures.junction_test_pads">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.test_structures.airbridge_dc.html">kqcircuits.test_structures.airbridge_dc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.test_structures.cross_test.html">kqcircuits.test_structures.cross_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.test_structures.stripes_test.html">kqcircuits.test_structures.stripes_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.test_structures.stripes_test_increasing_width.html">kqcircuits.test_structures.stripes_test_increasing_width</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.test_structures.test_structure.html">kqcircuits.test_structures.test_structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.test_structures.tsv_test_pattern.html">kqcircuits.test_structures.tsv_test_pattern</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.test_structures.html#module-kqcircuits.test_structures">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.util.html">kqcircuits.util</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.area.html">kqcircuits.util.area</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.count_instances.html">kqcircuits.util.count_instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.coupler_lib.html">kqcircuits.util.coupler_lib</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.deep_delete.html">kqcircuits.util.deep_delete</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.dependencies.html">kqcircuits.util.dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.edit_node_plugin.html">kqcircuits.util.edit_node_plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.export_helper.html">kqcircuits.util.export_helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.geometry_helper.html">kqcircuits.util.geometry_helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.geometry_json_encoder.html">kqcircuits.util.geometry_json_encoder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.groundgrid.html">kqcircuits.util.groundgrid</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.gui_helper.html">kqcircuits.util.gui_helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.import_helper.html">kqcircuits.util.import_helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.label.html">kqcircuits.util.label</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.layout_to_code.html">kqcircuits.util.layout_to_code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.library_helper.html">kqcircuits.util.library_helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.log_router.html">kqcircuits.util.log_router</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.merge.html">kqcircuits.util.merge</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.netlist_extraction.html">kqcircuits.util.netlist_extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.netlist_graph.html">kqcircuits.util.netlist_graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.parameters.html">kqcircuits.util.parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.plugin_startup.html">kqcircuits.util.plugin_startup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.refpoints.html">kqcircuits.util.refpoints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.replace_squids.html">kqcircuits.util.replace_squids</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.symmetric_polygons.html">kqcircuits.util.symmetric_polygons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.html#module-kqcircuits.util">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.defaults.html">kqcircuits.defaults</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.klayout_view.html">kqcircuits.klayout_view</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.layer_cluster.html">kqcircuits.layer_cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.pya_resolver.html">kqcircuits.pya_resolver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.run.html">kqcircuits.run</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.html#module-kqcircuits">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../citing.html">Citing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trademarks.html">Trademarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">KQCircuits</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">User Guide</a></li>
          <li class="breadcrumb-item"><a href="../simulations.html">External simulation tools</a></li>
      <li class="breadcrumb-item active">Simulation features</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/iqm-finland/KQCircuits/blob/main/docs/user_guide/simulation/simulation_features.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="simulation-features">
<h1>Simulation features<a class="headerlink" href="#simulation-features" title="Permalink to this headline"></a></h1>
<p>The simulation export covers following types of simulations.</p>
<section id="s-parameter-matrix">
<h2>S-parameter matrix<a class="headerlink" href="#s-parameter-matrix" title="Permalink to this headline"></a></h2>
<p>The output of a S-parameter (scattering parameter) simulation is a matrix of S-parameters between the ports.
The dimensions of the matrix is equal to number of ports given in the simulation object.
The rows and columns of the matrix are ordered by the port order number, i.e., the <code class="docutils literal notranslate"><span class="pre">number</span></code> parameter of
the class <a class="reference internal" href="../../api/kqcircuits.simulations.port.html#kqcircuits.simulations.port.Port" title="kqcircuits.simulations.port.Port"><code class="xref py py-class docutils literal notranslate"><span class="pre">Port</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some port variables like the <code class="docutils literal notranslate"><span class="pre">renormalization</span></code> of <a class="reference internal" href="../../api/kqcircuits.simulations.port.html#kqcircuits.simulations.port.Port" title="kqcircuits.simulations.port.Port"><code class="xref py py-class docutils literal notranslate"><span class="pre">Port</span></code></a> and the <code class="docutils literal notranslate"><span class="pre">deembed_len</span></code> of
<a class="reference internal" href="../../api/kqcircuits.simulations.port.html#kqcircuits.simulations.port.EdgePort" title="kqcircuits.simulations.port.EdgePort"><code class="xref py py-class docutils literal notranslate"><span class="pre">EdgePort</span></code></a> take effect in the output S-parameter matrix. You can always double-check the value of any
parameter from the exported json file.</p>
</div>
<p>The resulting S-parameter matrices are stored in <code class="docutils literal notranslate"><span class="pre">SnP</span></code> (Touchstone) file format, where the file
extension are <code class="docutils literal notranslate"><span class="pre">.s1p</span></code>, <code class="docutils literal notranslate"><span class="pre">.s2p</span></code>, <code class="docutils literal notranslate"><span class="pre">.s3p</span></code>, and so forth).</p>
<p>In Ansys Electronic Desktop, the S-parameter simulation feature employs HFSS Terminal solution type.
The S-parameter feature is activated using parameter <code class="docutils literal notranslate"><span class="pre">ansys_tool='hfss'</span></code>.
The relevant <code class="docutils literal notranslate"><span class="pre">ansys_export</span></code> parameters and their default values are listed below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export_parameters</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
    <span class="s1">&#39;ansys_tool&#39;</span><span class="p">:</span> <span class="s1">&#39;hfss&#39;</span><span class="p">,</span>  <span class="c1"># Determines whether to use HFSS (&#39;hfss&#39;), Q3D Extractor (&#39;q3d&#39;) or HFSS eigenmode (&#39;eigenmode&#39;)</span>
    <span class="s1">&#39;frequency_units&#39;</span><span class="p">:</span> <span class="s2">&quot;GHz&quot;</span><span class="p">,</span>  <span class="c1"># Units of frequency.</span>
    <span class="s1">&#39;frequency&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>  <span class="c1"># Frequency for mesh refinement. To set up multifrequency analysis in HFSS use list of numbers.</span>
    <span class="s1">&#39;max_delta_s&#39;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>  <span class="c1"># Stopping criterion in HFSS simulation.</span>
    <span class="s1">&#39;percent_refinement&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>  <span class="c1"># Percentage of mesh refinement on each iteration.</span>
    <span class="s1">&#39;maximum_passes&#39;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>  <span class="c1"># Maximum number of iterations in simulation.</span>
    <span class="s1">&#39;minimum_passes&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>  <span class="c1"># Minimum number of iterations in simulation.</span>
    <span class="s1">&#39;minimum_converged_passes&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>  <span class="c1"># Determines how many iterations have to meet the stopping criterion to stop simulation.</span>
    <span class="s1">&#39;sweep_enabled&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>  <span class="c1"># Determines if HFSS frequency sweep is enabled.</span>
    <span class="s1">&#39;sweep_start&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>  <span class="c1"># The lowest frequency in the sweep.</span>
    <span class="s1">&#39;sweep_end&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>  <span class="c1"># The highest frequency in the sweep.</span>
    <span class="s1">&#39;sweep_count&#39;</span><span class="p">:</span> <span class="mi">101</span><span class="p">,</span>  <span class="c1"># Number of frequencies in the sweep.</span>
    <span class="s1">&#39;sweep_type&#39;</span><span class="p">:</span> <span class="s1">&#39;interpolating&#39;</span><span class="p">,</span>  <span class="c1"># choices are &quot;interpolating&quot;, &quot;discrete&quot; or &quot;fast&quot;</span>
<span class="p">})</span>
</pre></div>
</div>
<p>The open-source alternative to calculate S-parameters is to use <code class="docutils literal notranslate"><span class="pre">elmer_export</span></code> with the export parameter
<code class="docutils literal notranslate"><span class="pre">tool='wave_equation'</span></code>.
For other relevant export parameters, please consult API docs for the function
<a class="reference internal" href="../../api/kqcircuits.simulations.export.elmer.elmer_export.html#kqcircuits.simulations.export.elmer.elmer_export.export_elmer" title="kqcircuits.simulations.export.elmer.elmer_export.export_elmer"><code class="xref py py-func docutils literal notranslate"><span class="pre">export_elmer()</span></code></a>.</p>
</section>
<section id="capacitance-matrix">
<h2>Capacitance matrix<a class="headerlink" href="#capacitance-matrix" title="Permalink to this headline"></a></h2>
<p>The primary use case of a capacitance matrix simulation is to estimate capacitive couplings between different elements.
The output of a capacitance simulation is a mutual capacitance matrix between islands of signal metals.
In the mutual capacitance matrix, a non-diagonal term <code class="docutils literal notranslate"><span class="pre">C_i_j</span></code> is the capacitance between two signals <code class="docutils literal notranslate"><span class="pre">i</span></code> and <code class="docutils literal notranslate"><span class="pre">j</span></code>,
and a diagonal term <code class="docutils literal notranslate"><span class="pre">C_i_i</span></code> is the capacitance between signal <code class="docutils literal notranslate"><span class="pre">i</span></code> and the ground.</p>
<p>The signal islands are determined by the ports of the simulation object and they are ordered by the port order number.
The port variable <code class="docutils literal notranslate"><span class="pre">signal_location</span></code> determines the location of the signal island.
The variable <code class="docutils literal notranslate"><span class="pre">ground_location</span></code> can be used to force any floating metal island as the ground.</p>
<p>From Ansys tool package, the Q3D solver is recommended for capacitance simulations.
This is activated with export parameter <code class="docutils literal notranslate"><span class="pre">ansys_tool='q3d'</span></code>.
The other relevant parameters and their default values are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export_parameters</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
    <span class="s1">&#39;ansys_tool&#39;</span><span class="p">:</span> <span class="s1">&#39;q3d&#39;</span><span class="p">,</span>  <span class="c1"># Determines whether to use HFSS (&#39;hfss&#39;), Q3D Extractor (&#39;q3d&#39;) or HFSS eigenmode (&#39;eigenmode&#39;)</span>
    <span class="s1">&#39;percent_error&#39;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>  <span class="c1"># Stopping criterion in Q3D simulation.</span>
    <span class="s1">&#39;percent_refinement&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>  <span class="c1"># Percentage of mesh refinement on each iteration.</span>
    <span class="s1">&#39;maximum_passes&#39;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>  <span class="c1"># Maximum number of iterations in simulation.</span>
    <span class="s1">&#39;minimum_passes&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>  <span class="c1"># Minimum number of iterations in simulation.</span>
    <span class="s1">&#39;minimum_converged_passes&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>  <span class="c1"># Determines how many iterations have to meet the stopping criterion to stop simulation.</span>
<span class="p">})</span>
</pre></div>
</div>
<p>The capacitance matrix simulations are also available with Ansys HFSS framework, which is useful in case if only HFSS
license is available.
For the usage one must perform a HFSS S-parameter simulation as indicated above and use the export parameter
<code class="docutils literal notranslate"><span class="pre">hfss_capacitance_export=True</span></code>.
This method assumes a purely capacitive model and is valid as long as the resulting <code class="docutils literal notranslate"><span class="pre">C_i_j</span></code> are constant over
frequency.</p>
<p>The Elmer export provides the open source alternative for capacitance matrix simulations.
The Elmer capacitance matrix simulation can be activated by using <code class="docutils literal notranslate"><span class="pre">elmer_export</span></code> with the export parameter
<code class="docutils literal notranslate"><span class="pre">tool='capacitance'</span></code>.
Please consult API docs of <a class="reference internal" href="../../api/kqcircuits.simulations.export.elmer.elmer_export.html#kqcircuits.simulations.export.elmer.elmer_export.export_elmer" title="kqcircuits.simulations.export.elmer.elmer_export.export_elmer"><code class="xref py py-func docutils literal notranslate"><span class="pre">export_elmer()</span></code></a> for more information.</p>
</section>
<section id="eigenmode">
<h2>Eigenmode<a class="headerlink" href="#eigenmode" title="Permalink to this headline"></a></h2>
<p>An eigenmode simulation provides results in terms of eigenmodes, i.e. resonances of a given structure.
The output of an eigenmode simulation is a list of complex-valued eigenfrequencies, which
can be used to estimate resonance frequencies and/or lifetimes of the resonances.
The eigenfrequencies are given in the Ansys eigenmode data file format with file extension <code class="docutils literal notranslate"><span class="pre">.eig</span></code>.</p>
<p>The solution method in eigenmode simulation is based on solving an
<a class="reference external" href="https://en.wikipedia.org/wiki/Eigenvalues_and_eigenvectors">eigenvalue problem</a>.
Thus, the eigenmode simulations do not accept manually set source terms, and ports are not needed to define excitation.
Instead internal ports of a simulation object can be employed to generate lumped RLC boundary conditions into the model.
This is done by setting the port parameter <code class="docutils literal notranslate"><span class="pre">junction=True</span></code> and by giving the desired values in <code class="docutils literal notranslate"><span class="pre">capacitance</span></code> and
<code class="docutils literal notranslate"><span class="pre">inductance</span></code> parameters.</p>
<p>Ansys HFSS Eigenmode solution type is employed in the eigenmode simulations.
The eigenmode simulations are activated by using <code class="docutils literal notranslate"><span class="pre">export_ansys</span></code> with export parameter <code class="docutils literal notranslate"><span class="pre">ansys_tool='eigenmode'</span></code>.
The other relevant parameters and their default values are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export_parameters</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
    <span class="s1">&#39;ansys_tool&#39;</span><span class="p">:</span> <span class="s1">&#39;eigenmode&#39;</span><span class="p">,</span>  <span class="c1"># Determines whether to use HFSS (&#39;hfss&#39;), Q3D Extractor (&#39;q3d&#39;) or HFSS eigenmode (&#39;eigenmode&#39;)</span>
    <span class="s1">&#39;frequency&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>  <span class="c1"># the lower limit for eigenfrequency.</span>
    <span class="s1">&#39;max_delta_f&#39;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>  <span class="c1"># Maximum allowed relative difference in eigenfrequency (%).</span>
    <span class="s1">&#39;n_modes&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>  <span class="c1"># Number of eigenmodes to solve.</span>
    <span class="s1">&#39;percent_refinement&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>  <span class="c1"># Percentage of mesh refinement on each iteration.</span>
    <span class="s1">&#39;maximum_passes&#39;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>  <span class="c1"># Maximum number of iterations in simulation.</span>
    <span class="s1">&#39;minimum_passes&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>  <span class="c1"># Minimum number of iterations in simulation.</span>
    <span class="s1">&#39;minimum_converged_passes&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>  <span class="c1"># Determines how many iterations have to meet the stopping criterion to stop simulation.</span>
<span class="p">})</span>
</pre></div>
</div>
</section>
<section id="energy-integrals-and-participation-ratio">
<h2>Energy integrals and participation ratio<a class="headerlink" href="#energy-integrals-and-participation-ratio" title="Permalink to this headline"></a></h2>
<p>The energy integrals can be calculated from HFSS S-parameter or eigenmode simulations by setting export parameter
<code class="docutils literal notranslate"><span class="pre">integrate_energies=True</span></code> in <code class="docutils literal notranslate"><span class="pre">ansys_export</span></code> function call.
The energy integrals of each simulation are stored into file ending with <code class="docutils literal notranslate"><span class="pre">_energies.cvs</span></code>.
This file includes energy integrals of each surface/solid objects and the total energy integrated over all solid
material objects.</p>
<p>The energy participation ratios (EPRs) are calculated from energy integrals using the post processing script
<code class="docutils literal notranslate"><span class="pre">export_epr.py</span></code>.
This is activated by export parameter <code class="docutils literal notranslate"><span class="pre">post_process_script='export_epr.py'</span></code>.
The EPRs are saved into a file ending with <code class="docutils literal notranslate"><span class="pre">_epr.csv</span></code>.</p>
</section>
<section id="cross-sectional-simulations">
<span id="id1"></span><h2>Cross-sectional simulations<a class="headerlink" href="#cross-sectional-simulations" title="Permalink to this headline"></a></h2>
<p>KQCircuits offers possibility to export Elmer cross-sectional simulations to calculate capacitance and inductance per
unit length.
In cross-sectional simulations, the geometry is technically 2-dimensional, which enables more precise accuracy than
with the fully 3-dimensional simulations.
The reduced complexity of dimensions also allows a more detailed model to be used, for example considering the London
penetration depth of metals.
The cross-sectional simulations are valid only if the cross-section of the corresponding 3-dimensional geometry is
constant.
That includes for example waveguides.</p>
<p>The geometry of the cross-sectional simulations is described by an instance of a <a class="reference internal" href="../../api/kqcircuits.simulations.cross_section_simulation.html#kqcircuits.simulations.cross_section_simulation.CrossSectionSimulation" title="kqcircuits.simulations.cross_section_simulation.CrossSectionSimulation"><code class="xref py py-class docutils literal notranslate"><span class="pre">CrossSectionSimulation</span></code></a>
subclass.
The cross-sectional simulation export follows similar logic to 3-dimensional simulations.
That is, you create a simulation subclass, create an empty folder for export files, build a list of simulation objects,
and call the <a class="reference internal" href="../../api/kqcircuits.simulations.export.elmer.elmer_export.html#kqcircuits.simulations.export.elmer.elmer_export.export_elmer" title="kqcircuits.simulations.export.elmer.elmer_export.export_elmer"><code class="xref py py-func docutils literal notranslate"><span class="pre">export_elmer()</span></code></a> function with suitable
<code class="docutils literal notranslate"><span class="pre">export_parameters</span></code>.
An example for simulating coplanar-waveguide cross-section can be found in
<a class="reference external" href="https://github.com/iqm-finland/KQCircuits/blob/main/klayout_package/python/scripts/simulations/cpw_cross_section_sim.py">klayout_package/python/scripts/simulations/cpw_cross_section_sim.py</a>.</p>
<p>There is an additional <code class="docutils literal notranslate"><span class="pre">Xsection</span></code> tool to create cross-sectional geometries out of the x-y-layouts.
The tool is described in more details in <a class="reference internal" href="../xsection.html#creating-cross-section-images"><span class="std std-ref">Creating cross section images</span></a> and an example simulation can be found in
<a class="reference external" href="https://github.com/iqm-finland/KQCircuits/blob/main/klayout_package/python/scripts/simulations/waveguides_sim_xsection.py">klayout_package/python/scripts/simulations/waveguides_sim_xsection.py</a>.</p>
</section>
<section id="pyepr">
<span id="py-epr"></span><h2>pyEPR<a class="headerlink" href="#pyepr" title="Permalink to this headline"></a></h2>
<p><a class="reference external" href="https://github.com/zlatko-minev/pyEPR">pyEPR</a> is supported for HFSS eigenmode simulations.
A pyEPR simulation is activated using <code class="docutils literal notranslate"><span class="pre">ansys_tool='eigenmode'</span></code> and <code class="docutils literal notranslate"><span class="pre">simulation_flags=['pyepr']</span></code> in the
<code class="docutils literal notranslate"><span class="pre">export_ansys</span></code> function call.
An example simulation is found at <a class="reference external" href="https://github.com/iqm-finland/KQCircuits/blob/main/klayout_package/python/scripts/simulations/xmons_direct_coupling_pyepr.py">klayout_package/python/scripts/simulations/xmons_direct_coupling_pyepr.py</a>.
See <a class="reference external" href="https://github.com/iqm-finland/KQCircuits-Examples/blob/main/notebooks/pyEPR_example.ipynb">pyEPR_example.ipynb</a>
in the <a class="reference external" href="https://github.com/iqm-finland/KQCircuits-Examples/">KQCircuits-Examples</a> repository for an example on using
pyEPR itself.</p>
<p>The pyEPR can be used for TLS-limited <span class="math notranslate nohighlight">\(T_1\)</span> estimation by using additional export parameter
<code class="docutils literal notranslate"><span class="pre">intermediate_processing_command='python</span> <span class="pre">&quot;scripts/t1_estimate.py&quot;'</span></code>.
This will run <a class="reference external" href="https://github.com/iqm-finland/KQCircuits/blob/main/klayout_package/python/scripts/simulations/ansys/t1_estimate.py">t1_estimate.py</a> between
queued simulations and compute the electrical participations in the lossy interfaces.
See <a class="reference external" href="https://github.com/iqm-finland/KQCircuits/blob/main/klayout_package/python/scripts/simulations/double_pads_sim.py">double_pads_sim.py</a> for an example and
<cite>N. Savola, ‘Design and modelling of long-coherence qubits using energy participation ratios’, Master’s thesis,
Aalto University, 2023</cite>, for details on the method.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="simulation_scripts.html" class="btn btn-neutral float-left" title="Export functions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="gmsh_elmer_export.html" class="btn btn-neutral float-right" title="Gmsh/Elmer export" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021-2024, IQM.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>